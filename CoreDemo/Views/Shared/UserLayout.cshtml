@using FluentValidation
@using Microsoft.AspNetCore.Http;
@using System.Text.Json
@inject IHttpContextAccessor httpContextaccessor;
@{
    Layout = null;
    var thema = "";
    if (httpContextaccessor.HttpContext.Request.Cookies["thema"] != null)
    {
        thema = httpContextaccessor.HttpContext.Request.Cookies["thema"].ToString();
    }
    bool check = thema == "dark";
}

<!DOCTYPE html>
<html lang="tr">
<head>
    <title>@ViewData["Title"] - Core Blog</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />
    <meta name="rating" content="general" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="description" content="Sitemizde güncel teknolojiler ile ilgili bloglar bulabilirsiniz." />
    <meta name="Copyright" content="© Copyright 2021 - 2023 Core Blog. Tüm Hakları Saklıdır." />
    <meta property="og:locale" content="tr_TR" />
    <meta property="og:site_name" content="Core Blog" />
    <meta property="og:type" content="website" />
    <meta name="language" content="Turkish" />
    <meta property="keywords" content="Core Blog, Core 5.0 Blog, Teknoloji Blogları, Yazılım Blogları,Tiyatro Blogları,Film & Dizi Blogları, Oyun Blogları, Spor Blogları,Seyahat Blogları, Donanım Blogları" />
    <link rel="icon" type="image/x-icon" href="~/writer/assets/images/favicon.ico" />
    <link rel="apple-touch-icon" href="~/writer/assets/images/favicon.ico" />
    <!-- Main navigation için skip link -->
    <a href="#main-content" class="skip-link" style="position: absolute; left: -9999px;">Ana içeriğe git</a>
    <script async>
        addEventListener("load", function () {
            setTimeout(hideURLbar, 0);
        }, false);

        function hideURLbar() {
            window.scrollTo(0, 1);
        }
    </script>
    <!-- Kritik CSS'ler -->
    <style>
        /* Temel font ve layout stilleri */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; margin: 0; padding: 0; }
        .navbar { padding: .5rem 1rem; }
        .container { width: 100%; padding-right: 15px; padding-left: 15px; margin-right: auto; margin-left: auto; }
    </style>

    <!-- Font preload - Local fonts -->
    <link rel="preload" href="~/fonts/poppins-v20-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="~/fonts/poppins-v20-latin-500.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="~/fonts/poppins-v20-latin-600.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="~/CoreBlogTema/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="~/CoreBlogTema/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="~/CoreBlogTema/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>
    
    <!-- Local Poppins Font -->
    <link href="~/css/poppins-local.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link href="~/CoreBlogTema/css/fontawesome-all.min.css" rel="stylesheet">
    
    <!-- Bootstrap -->
    <link href="~/coreblogtema/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Layout shift önleyici -->
    <link href="~/css/layout-fix.css" rel="stylesheet">
    
    <!-- Font yükleme optimizasyonu için stil -->
    <style>
        .wf-loading {
            visibility: hidden;
        }
        .wf-active {
            visibility: visible;
        }
    </style>
    
    <!-- Font yükleme kontrolü için script -->
    <script>
        document.documentElement.classList.add('wf-loading');
        window.addEventListener('load', function() {
            setTimeout(function() {
                document.documentElement.classList.remove('wf-loading');
                document.documentElement.classList.add('wf-active');
            }, 100);
        });
    </script>

    @if (thema == "dark")
    {
        <link href="~/css/contrast-fix-dark.css" rel="stylesheet">
        <link rel="preload" href="~/coreblogtema/css/single-dark.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="~/coreblogtema/css/single-dark.min.css" /></noscript>

        <link rel="preload" href="~/coreblogtema/css/style-dark.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="~/coreblogtema/css/style-dark.min.css" /></noscript>

        <link rel="preload" href="~/writer/assets/css/SweetAlert2-dark.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="~/writer/assets/css/SweetAlert2-dark.min.css" /></noscript>
    }
    else
    {
        <link href="~/css/contrast-fix.css" rel="stylesheet">
        <link rel="preload" href="~/coreblogtema/css/single-light.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="~/coreblogtema/css/single-light.min.css" /></noscript>

        <link rel="preload" href="~/coreblogtema/css/style-light.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="~/coreblogtema/css/style-light.min.css" /></noscript>

        <link rel="preload" href="~/writer/assets/css/SweetAlert2.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="~/writer/assets/css/SweetAlert2.min.css" /></noscript>
        
    }

    <link rel="preload" href="~/coreblogtema/css/thema-toggle.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="~/coreblogtema/css/thema-toggle.css" /></noscript>


    @RenderSection("HeaderSection",false)
</head>

<body>
    <!--Header-->

    <header>
        <div class="top-bar_sub_w3layouts container-fluid">
            <div class="row">
                <div class="col-md-4 logo text-left">
                    <h1 class="navbar-brand" onclick="location.href='/Blog/Index'">
                        <i class="fab fa-linode"></i> Core Blog
                    </h1>

                </div>
                @await Html.PartialAsync("Partial2")
                <div class="col-md-4 log-icons text-right">

                    <ul class="social_list1 mt-3">

                        <li>
                            <a href="https://www.facebook.com/profile.php?id=100011652821384" target="_blank" class="facebook1 mx-2" aria-label="Facebook profilimizi ziyaret edin">
                                <i class="fab fa-facebook-f" aria-hidden="true"></i>

                            </a>
                        </li>
                        <li>
                            <a href="https://www.linkedin.com/in/buraktemelkaya/" target="_blank" class="twitter2 mx-2" aria-label="LinkedIn profilimizi ziyaret edin">
                                <i class="fab fa-linkedin" aria-hidden="true"></i>

                            </a>
                        </li>
                        <li>
                            <a href="https://github.com/BurakTemelkaya" target="_blank" class="github mx-2" aria-label="GitHub profilimizi ziyaret edin">
                                <i class="fab fa-github" aria-hidden="true"></i>
                            </a>
                        </li>
                        <li>
                            <a href="https://www.youtube.com/channel/UC250K8wIDdyJPI9o2L2hy8w" target="_blank" class="pin mx-2" aria-label="YouTube kanalımızı ziyaret edin">
                                <i class="fab fa-youtube" aria-hidden="true"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </header>

    <div style="position: sticky; top: 0; z-index:999;">
        @await Html.PartialAsync("Partial1")
    </div>

    <main id="main-content">
        @RenderBody()
    </main>

    @await Html.PartialAsync("Partial3")
    
    <!-- Temel kütüphaneler -->
    <script src="~/admin/js/jquery-3.1.1.min.js"></script>
    <script src="~/admin/js/bootstrap.min.js"></script>

    <!-- jQuery bağımlı kütüphaneler -->
    <script src="~/CoreBlogTema/js/move-top.js"></script>
    <script src="~/CoreBlogTema/js/easing.js"></script>
    <script src="~/js/jquery-validate/jquery.validate.min.js"></script>
    <script src="~/js/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>

    <!-- Sayfa başına dön fonksiyonu -->
    <script>
        jQuery(document).ready(function() {
            var defaults = {
                containerID: 'toTop',
                containerHoverID: 'toTopHover',
                scrollSpeed: 1200,
                easingType: 'linear'
            };
            
            jQuery().UItoTop({
                easingType: 'easeOutQuart'
            });
        });
    </script>

    <a href="#home" class="scroll" id="toTop" style="display: block;" aria-label="Sayfanın başına git" role="button">
        <span id="toTopHover" style="opacity: 1;" aria-hidden="true"> </span>
        <span class="sr-only">Sayfanın başına git</span>
    </a>

    <!-- Özel scriptler -->
    <script src="~/js/newsletter-subscribe.js"></script>
    <script src="~/js/blog-search.js"></script>
    <script src="~/js/cookie.js"></script>

    @if (thema == "dark")
    {
        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', (event) => {
                const recaptcha = document.querySelector('.g-recaptcha');
                if (recaptcha != null) {
                    recaptcha.setAttribute("data-theme", "dark");
                }
            });
        </script>
        <script src="~/writer/assets/js/SweetAlert2-dark.js" defer></script>
    }
    else
    {
        <script src="~/writer/assets/js/SweetAlert2.js" defer></script>
    }


    @{
        string json = httpContextaccessor.HttpContext.Session.GetString("ValidationExceptions") == string.Empty ? "[]" 
        : httpContextaccessor.HttpContext.Session.GetString("ValidationExceptions");

        <script async>
            let validationErrors =@Html.Raw(json);

            if (validationErrors && validationErrors.length > 0) {
                // Eğer validationErrors bir dizi değilse, bir diziye dönüştür
                if (!Array.isArray(validationErrors)) {
                    validationErrors = JSON.parse(validationErrors);
                }

                let errorMessage = "<ul>";

                validationErrors.forEach(function (exception) {
                    errorMessage += "<li>" + exception + "</li>";
                });

                errorMessage += "</ul>";

                Swal.fire({
                    title: "Hatalar",
                    html: errorMessage,
                    icon: "error",
                });
            }
        
        </script>

        {
            httpContextaccessor.HttpContext.Session.SetString("ValidationExceptions", "");
        }
    }


    @RenderSection("ScriptSection",false)
    
</body>
</html>
